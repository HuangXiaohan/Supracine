{"ast":null,"code":"import _classCallCheck from \"/home/huang/Documents/Supracine/supracine-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/huang/Documents/Supracine/supracine-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/huang/Documents/Supracine/supracine-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/huang/Documents/Supracine/supracine-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/huang/Documents/Supracine/supracine-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/huang/Documents/Supracine/supracine-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/huang/Documents/Supracine/supracine-react/src/MovieDetail.js\";\nimport React, { Component } from \"react\";\nimport './SearchMovie.css';\nimport { withRouter } from \"react-router-dom\";\nimport { favorites } from \"./Favorites\";\n\nvar MovieDetail = /*#__PURE__*/function (_Component) {\n  _inherits(MovieDetail, _Component);\n\n  function MovieDetail(props) {\n    var _this;\n\n    _classCallCheck(this, MovieDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MovieDetail).call(this, props));\n    _this.state = {\n      movieId: _this.props.match.params.id,\n      movieInfo: \"\",\n      rate: \"\",\n      rateStyle: {},\n      isFavorite: false\n    };\n    _this.filterText = _this.filterText.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeFavorite = _this.changeFavorite.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MovieDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (favorites.includes(this.state.movieId)) {\n        this.setState({\n          isFavorite: true\n        });\n      }\n\n      var source = \"http://www.omdbapi.com/?i=\" + this.state.movieId + \"&apikey=4eacbfee\";\n      fetch(source).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        if (result.Response === \"False\") {\n          _this2.setState({\n            movieInfo: \"\"\n          }, function () {\n            return alert(\"Error! \" + result.Error);\n          });\n        }\n\n        var rate = \"0%\";\n        if (result.imdbRating !== \"N/A\") rate = parseFloat(result.imdbRating) * 10 + \"%\";\n\n        _this2.setState({\n          movieInfo: result,\n          rate: rate,\n          rateStyle: {\n            width: rate\n          }\n        });\n      }, function (error) {\n        _this2.setState({\n          movieInfo: \"\"\n        }, function () {\n          return alert(\"Error!\");\n        });\n      });\n    }\n  }, {\n    key: \"filterText\",\n    value: function filterText(t) {\n      if (t === \"N/A\") return \"\";else return t;\n    }\n  }, {\n    key: \"changeFavorite\",\n    value: function changeFavorite() {\n      if (this.state.isFavorite) {\n        for (var i = 0; i < favorites.length; i++) {\n          if (favorites[i] === this.state.movieId) {\n            favorites.splice(i, 1);\n            i--;\n          }\n        }\n      } else {\n        favorites.push(this.state.movieId);\n      }\n\n      this.setState({\n        isFavorite: !this.state.isFavorite\n      });\n      console.log(favorites);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"movie-detail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"movie-image-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"movie-img\",\n        src: this.state.movieInfo.Poster,\n        alt: this.state.movieInfo.Title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"movie-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"movie-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, this.state.movieInfo.Title), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 41\n        }\n      }, \"Rating : \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rate-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rate-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rate\",\n        style: this.state.rateStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 29\n        }\n      }, this.state.rate))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"vote\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, this.state.movieInfo.imdbVotes === \"N/A\" ? \"No votes yet\" : this.state.movieInfo.imdbVotes + \" votes\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"clear\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 28\n        }\n      }, \"Type : \"), this.state.movieInfo.Type), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 28\n        }\n      }, \"Genre : \"), this.filterText(this.state.movieInfo.Genre)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 28\n        }\n      }, \"Year : \"), this.state.movieInfo.Year), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 28\n        }\n      }, \"Released : \"), this.filterText(this.state.movieInfo.Released)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 28\n        }\n      }, \"Country : \"), this.filterText(this.state.movieInfo.Country)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 28\n        }\n      }, \"Language : \"), this.filterText(this.state.movieInfo.Language)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 28\n        }\n      }, \"RunTime : \"), this.state.movieInfo.RunTime), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 28\n        }\n      }, \"Director : \"), \" \", this.filterText(this.state.movieInfo.Director)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 28\n        }\n      }, \"Writer : \"), \" \", this.filterText(this.state.movieInfo.Writer)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 28\n        }\n      }, \"Actors : \"), \"  \", this.filterText(this.state.movieInfo.Actors)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 28\n        }\n      }, \"Introduction : \"), \" \", this.filterText(this.state.movieInfo.Plot))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"favorite\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"add-favorite \".concat(this.state.isFavorite ? 'blue-button' : 'red-button'),\n        onClick: this.changeFavorite,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }\n      }, this.state.isFavorite ? \"Remove from favorite\" : \"Add to favorites\"), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"favorites-link\",\n        href: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }\n      }, \"My favorites\"))));\n    }\n  }]);\n\n  return MovieDetail;\n}(Component);\n\nexport default withRouter(MovieDetail);","map":{"version":3,"sources":["/home/huang/Documents/Supracine/supracine-react/src/MovieDetail.js"],"names":["React","Component","withRouter","favorites","MovieDetail","props","state","movieId","match","params","id","movieInfo","rate","rateStyle","isFavorite","filterText","bind","changeFavorite","includes","setState","source","fetch","then","res","json","result","Response","alert","Error","imdbRating","parseFloat","width","error","t","i","length","splice","push","console","log","Poster","Title","imdbVotes","Type","Genre","Year","Released","Country","Language","RunTime","Director","Writer","Actors","Plot"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './SearchMovie.css';\nimport { withRouter } from \"react-router-dom\";\nimport {favorites} from \"./Favorites\";\n\nclass MovieDetail extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            movieId : this.props.match.params.id,\n            movieInfo: \"\",\n            rate: \"\",\n            rateStyle:{},\n            isFavorite: false\n        }\n\n        this.filterText = this.filterText.bind(this);\n        this.changeFavorite = this.changeFavorite.bind(this);\n    }\n\n    componentDidMount(){\n        if(favorites.includes(this.state.movieId)){\n            this.setState({isFavorite: true});\n        }\n\n        var source = \"http://www.omdbapi.com/?i=\" + this.state.movieId + \"&apikey=4eacbfee\";\n        fetch(source)\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    if(result.Response === \"False\"){\n                        this.setState({\n                            movieInfo: \"\"\n                        },()=>alert(\"Error! \"+ result.Error));\n                    }\n                    let rate = \"0%\";\n                    if(result.imdbRating !== \"N/A\")\n                        rate = parseFloat(result.imdbRating)*10 + \"%\";\n                    this.setState({\n                        movieInfo: result,\n                        rate: rate,\n                        rateStyle: {\n                            width: rate\n                        }\n                    });\n                },\n                (error) => {\n                    this.setState({\n                        movieInfo: \"\"\n                    },()=>alert(\"Error!\"));\n                }\n            );\n    }\n\n\n    filterText(t){\n        if(t === \"N/A\")\n            return \"\"\n        else\n            return t;\n    }\n\n    changeFavorite(){\n        if(this.state.isFavorite){\n            for( var i = 0; i < favorites.length; i++){                        \n                if ( favorites[i] === this.state.movieId) { \n                    favorites.splice(i, 1); \n                    i--; \n                }\n            }\n        }\n        else{\n            favorites.push(this.state.movieId);\n        }\n\n        this.setState({isFavorite : !this.state.isFavorite});\n        \n        console.log(favorites);\n    }\n\n    render(){\n        return(\n            <div className=\"movie-detail\">\n                <div className=\"movie-image-div\">\n                    <img className=\"movie-img\" src={this.state.movieInfo.Poster} alt={this.state.movieInfo.Title}></img>\n                </div>\n                <div className=\"movie-content\">\n                    <p className=\"movie-title\">{this.state.movieInfo.Title}</p>\n                    <p className=\"left\"><b>Rating : </b></p>\n                    <div className=\"rate-div\">\n                        <div className=\"rate-container\">\n                            <div className=\"rate\" style={this.state.rateStyle}>{this.state.rate}</div>\n                        </div>\n                    </div>\n                    <div className=\"vote\">{this.state.movieInfo.imdbVotes === \"N/A\" ? \"No votes yet\" : this.state.movieInfo.imdbVotes + \" votes\"}</div>\n                    <div className=\"clear\" ></div> \n                    <div className=\"info\">\n                        <p><b>Type : </b>{this.state.movieInfo.Type}</p>\n                        <p><b>Genre : </b>{this.filterText(this.state.movieInfo.Genre)}</p>\n                        <p><b>Year : </b>{this.state.movieInfo.Year}</p>\n                        <p><b>Released : </b>{this.filterText(this.state.movieInfo.Released)}</p>\n                        <p><b>Country : </b>{this.filterText(this.state.movieInfo.Country)}</p>\n                        <p><b>Language : </b>{this.filterText(this.state.movieInfo.Language)}</p>\n                        <p><b>RunTime : </b>{this.state.movieInfo.RunTime}</p>\n                        <p><b>Director : </b> {this.filterText(this.state.movieInfo.Director)}</p>\n                        <p><b>Writer : </b> {this.filterText(this.state.movieInfo.Writer)}</p>\n                        <p><b>Actors : </b>  {this.filterText(this.state.movieInfo.Actors)}</p>\n                        <p><b>Introduction : </b> {this.filterText(this.state.movieInfo.Plot)}</p>\n                    </div>\n                    <div className=\"favorite\">\n                        <button className={`add-favorite ${this.state.isFavorite ? 'blue-button' : 'red-button' }`} onClick={this.changeFavorite}>{this.state.isFavorite ? \"Remove from favorite\" : \"Add to favorites\"}</button>\n                        <a className=\"favorites-link\" href=\"\">My favorites</a>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(MovieDetail);"]},"metadata":{},"sourceType":"module"}